<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- <link rel="stylesheet" href="fonts/icomoon/style.css"> -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous">
    <link rel="stylesheet" href="fonts/icomoon/style.css">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/styles.css"/>

    <title>Post Pulse</title>
  </head>
  <body>
    <div class="container">

      <%- include("partials/header.ejs") %>

      <!-- posts  -->
      <div class="row flex-row justify-content-around gy-3 gy-md-5" style="margin-top: 100px;">

        <% 
          if(locals.posts && locals.posts.length != 0){
            posts.forEach(post => {
              %>
              <!-- post-card  -->
        <div class="card col-10 col-md-5" onclick="viewPost('<%=post.id%>');">
          <img src="" class="card-img-top" alt="">
          <div class="card-body">
            <h2 class="card-title"><%=post.title%></h2>
            <p class="card-text"><%=post.content.split('.')[0]%></p>
            <div class="d-flex flex-row justify-content-between">
              <a href="#" class="link-underline">Read More...</a>
              <span class="post-datetime"><%=post.datetime%></span>
            </div>
          </div>
        </div>
        <!-- post-card  -->
              <%
            });
            %>
            <%
          }else{
            %>
             <div class="row d-flex flex-column align-items-center" style="margin-top: 100px;">
              <h1 class="text-center">No Posts to Available</h1>
              <a href="new-post" class="btn mt-5" style="background-color: #6F4E37; color: #FED8B1; width: 100px;">Publish</a>
              </div>
            <%
          }  
        %>

      </div>
      <!-- posts  -->

      <!-- <div class="row">
        <div class="hero"></div>
      </div> -->

      <%
      
        if(locals.posts && locals.posts.length != 0){
          %>
          <!-- pagination  -->
      <div class="row mt-5">
        <nav aria-label="Page navigation example">
          <ul class="pagination justify-content-center">
            <li class="page-item">
              <a class="page-link pagination-bg" href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>
            <li class="page-item"><a class="page-link pagination-bg" href="#">1</a></li>
            <li class="page-item"><a class="page-link pagination-bg" href="#">2</a></li>
            <li class="page-item"><a class="page-link pagination-bg" href="#">3</a></li>
            <li class="page-item">
              <a class="page-link pagination-bg" href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      <!-- pagination  -->
          <%
        }else{
          %>
            <div class="row" style="margin-bottom: 200px;"></div>
          <%
        }

      %>

    </div>

    <!-- footer  -->
    <%- include("partials/footer.ejs")%>
    <!-- footer  -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>